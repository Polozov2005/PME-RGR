********************************************
**  This file was created by TINA       **
**   SMPS subcircuits                             **
**    (c) 1996-2006 DesignSoft, Inc.     **
********************************************

.Subckt Ampli IN+ IN- OUT  V+ V-
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 FPOLE1=0 FPOLE2=0 VDROPOH=0 VDROPOL=0 
+    VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 CURRDOUB=0 VOUTOFFS=0
Y1 In+ In- Out V+ V-  _Amp
.Model _Amp AMPLI (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} FPOLE1={FPOLE1} FPOLE2={FPOLE2} VDROPOH={VDROPOH} VDROPOL={VDROPOL} VOFFSNOM={VOFFSNOM} 
+    TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB} VOUTOFFS={VOUTOFFS}  );
.Ends Ampli 

.Subckt AmpliGndRef IN+ IN- OUT GND
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 FPOLE1=0 FPOLE2=0 VOUTH=0 VOUTL=0 
+    VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 CURRDOUB=0 VOUTOFFS=0
Y1 In+ In- Out Gnd  _Amp
.Model _Amp AMPLI_GR (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} FPOLE1={FPOLE1} FPOLE2={FPOLE2} VOUTH={VOUTH} VOUTL={VOUTL} VOFFSNOM={VOFFSNOM} 
+    TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB} VOUTOFFS={VOUTOFFS}  );
.Ends AmpliGndRef 

.Subckt Comp IN+ IN- OUT  V+ V-
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 DELAYHL=0 DELAYLH=0 
+    VHYST=0 VDROPOH=0 VDROPOL=0  VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 VTHRES=0 
Y1 In+ In- Out V+ V-  _Comp
.Model _Comp COMP (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VHYST={VHYST} VDROPOH={VDROPOH}
+    VDROPOL={VDROPOL}  VOFFSNOM={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} 
+    CURRDOUB={CURRDOUB} VOUTOFFS={VOUTOFFS}  VTHRES={VTHRES}   );
.Ends CompGndRef 

.Subckt CompGndRef  IN+ IN- OUT GND
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 DELAYHL=0 DELAYLH=0 
+    VHYST=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 VTHRES=0 
Y1 In+ In- Out Gnd  _Comp
.Model _Comp COMP_GR (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VHYST={VHYST} VOUTH={VOUTH} 
+    VOUTL={VOUTL} VOFFSNOM={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB}
+    VOUTOFFS={VOUTOFFS}  VTHRES={VTHRES}   );
.Ends CompGndRef 

.Subckt Comp2InpAnd IN1+ IN1- IN2+ IN2- OUT GND
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0
Y1 In1+ In1- In2+ In2- Out Gnd  _Comp
.Model _Comp COMP_GR_2INP (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VOUTH={VOUTH} 
+    VOUTL={VOUTL} VOFFSNOM={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB}
+    VOUTOFFS={VOUTOFFS} DCTRANSFER={DCTRANSFER} LOGICFUNC={LOGICFUNC} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}  );
.Ends Comp2InpAnd

.Subckt Comp3InpAnd IN1+ IN1- IN2+ IN2- IN3+ IN3- OUT GND
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0
Y1 In1+ In1- In2+ In2- In3+ In3- Out Gnd  _Comp
.Model _Comp COMP_GR_3INP (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VOUTH={VOUTH} 
+    VOUTL={VOUTL} VOFFSNOM={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB}
+    VOUTOFFS={VOUTOFFS} DCTRANSFER={DCTRANSFER} LOGICFUNC={LOGICFUNC}
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2} VTHRES3={VTHRES3} VHYST3={VHYST3} );
.Ends Comp3InpAnd

.Subckt Comp4InpAnd IN1+ IN1- IN2+ IN2- IN3+ IN3- IN4+ IN4- OUT GND
+ Params: GAIN=1000 RIN=1E30 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 
+    VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0 VTHRES4=0 VHYST4=0 
Y1 In1+ In1- In2+ In2- In3+ In3- In4+ In4- Out Gnd  _Comp
.Model _Comp COMP_GR_4INP (GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VOUTH={VOUTH} 
+    VOUTL={VOUTL} VOFFSNOM={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB}
+    VOUTOFFS={VOUTOFFS} DCTRANSFER={DCTRANSFER} LOGICFUNC={LOGICFUNC} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2} VTHRES3={VTHRES3} VHYST3={VHYST3} VTHRES4={VTHRES4}
+    VHYST4={VHYST4} );
.Ends Comp4InpAnd

.Subckt VCO InP InM Gnd OutSin OutTri OutSqr PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E30 INULIM=1E30
+ LIMRNG=1E-6 DUTYCYC=0.5 RISETIME=1E-9 FALLTIME=1E-9 MODE=1
Y1 InP InM Gnd OutSin OutTri OutSq VCO_
.Model VCO_ VCO (CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} PHI0 ={PHI0} OUTAMPLI ={OUTAMPLI} OUTOFFS ={OUTOFFS} 
+ INLLIM ={INLLIM} INULIM ={INULIM} LIMRNG ={LIMRNG} DUTYCYC ={DUTYCYC} RISETIME ={RISETIME} FALLTIME ={FALLTIME} MODE ={MODE})
.Ends

.Subckt SINEVCO InP InM Gnd Out PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E30 INULIM=1E30
+ LIMRNG=1E-6  MODE=1
Y1 InP InM Gnd Out sinVCO
.Model sinVCO SINE_VCO (CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} PHI0 ={PHI0} OUTAMPLI ={OUTAMPLI} OUTOFFS ={OUTOFFS} 
+ INLLIM ={INLLIM} INULIM ={INULIM} LIMRNG ={LIMRNG} MODE ={MODE})
.Ends

.Subckt TRIVCO InP InM Gnd Out PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E30 INULIM=1E30
+ LIMRNG=1E-6 DUTYCYC=0.5 MODE=1
Y1 InP InM Gnd Out triVCO
.Model triVCO TRI_VCO (CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} PHI0 ={PHI0} OUTAMPLI ={OUTAMPLI} OUTOFFS ={OUTOFFS} 
+ INLLIM ={INLLIM} INULIM ={INULIM} LIMRNG ={LIMRNG} DUTYCYC ={DUTYCYC} MODE ={MODE})
.Ends

.Subckt SQRVCO InP InM Gnd Out PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E30 INULIM=1E30
+ LIMRNG=1E-6 DUTYCYC=0.5 RISETIME=1E-9 FALLTIME=1E-9 MODE=1
Y1 InP InM Gnd Out sqrVCO
.Model sqrVCO SQUARE_VCO (CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} PHI0 ={PHI0} OUTAMPLI ={OUTAMPLI} OUTOFFS ={OUTOFFS} 
+ INLLIM ={INLLIM} INULIM ={INULIM} LIMRNG ={LIMRNG} DUTYCYC ={DUTYCYC} RISETIME ={RISETIME} FALLTIME ={FALLTIME} MODE ={MODE})
.Ends

.Subckt NCOUNTER_UDSR   CLK UD CE S R MIN MAX  GND VCC PARAMS: INTYP=0 OUTTYP=0 DEL=0 IOMODEL=0 
+  DELL2H=10E-9 DELH2L=10E-9 LATCH=1 MAXCOUNT=15
Y1  UD CLK CE R MIN MAX S GND VCC  _CNTN
.Model _CNTN  CNTN_UDSR (INTYP ={INTYP} OUTTYP ={OUTTYP} DEL ={DEL} IOMODEL ={IOMODEL} DELL2H ={DELL2H} 
+ DELH2L ={DELH2L} LATCH ={LATCH} MAXCOUNT ={MAXCOUNT} 
.Ends

* Standard operational amplifier macromodel subcircuit
* Created using 08/05/06
* (REV 1.1 29/07/06 )
.SUBCKT StdOpamp INP INM VP VM Out
+ Params: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K FPOLE1=5 FPOLE2=1MEG 
+         VDROPOH=1.9 VDROPOL=1.9 VOFFS=1m IBIAS=80n IOFFS=20n 
*
.PARAM VOSW = 15
.PARAM pi = 3.141592
.PARAM IS = 1.0E-12
.PARAM VT = 0.02585
.PARAM C1 = {VOSW/ROUT/SLEWRATE}
.PARAM IMAX = {C1*SLEWRATE}
.PARAM R1 = {1/(2*pi*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM R2 = 100
.PARAM G2 = {1/R2}
.PARAM GOUT = {1/ROUT}
.PARAM C2 = {1/(2*pi*R2*FPOLE2)}
.PARAM VDF = {VT*Log(1 + IMAX/IS)}
*
Ibiasm      INM 0  {IBIAS - IOFFS}
RINM      INM  8  {2*RINC}
RINP      INP  8  {2*RINC}
Ibias       10 0   {IBIAS}
Voffs       10 INP  {VOFFS}
Vc          VP 11  {VDROPOH + VDF}
Ve          12 VM  {VDROPOL + VDF}
D1          VM VP  D_1
Rp          VP VM  15E3
ROut        OUT 8  {ROUT}
GmO         8 OUT Value =  {V(9,8)*GOUT}
C2          9 8  {C2}
R2          9 8  {R2}
Gm2         8 9  Value =  {V(7,8)*G2}
Rin         INM 10  {RIN}
EGND        8  0  POLY(2) (VP,0) (VM,0) 0 .5 .5
D3          12 7  D_1
D2          7 11  D_1
C1          7 8  {C1}
R1          7 8  {R1}
Gm1         8 7 Value = { Limit( GM1*V(10,INM), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} )
.ENDS


.SUBCKT DFFLOP  PREB CLRB CLK D Q QB
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 DFF(1) DPWR DGND PREB CLRB CLK
+ D Q QB
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT DFFLOP_P PREB CLRB CLK D Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0

U1 DFF(1) DPWR DGND PREB CLRB CLK
+ D Q QB
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT RSFFLOP  S  R  Q  QB
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_STD
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_STD
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DGND DGND Q QB
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )

.ENDS

.SUBCKT RSFFLOP_P   S  R  Q  QB  DPWR  DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_STD
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_STD
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DGND DGND Q QB
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )

.ENDS

.SUBCKT TFFLOP  PREB CLRB CLKB T Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB T T Q QB 
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT TFFLOP_P  PREB CLRB CLKB T Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB T T Q QB 
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFFLOP  PREB CLRB CLKB J K Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFFLOP_P  PREB CLRB CLKB J K Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_HC
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS



